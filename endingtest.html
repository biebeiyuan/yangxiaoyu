<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>ç»“å±€ï¼šæ·é”ä¸é™¨æ˜Ÿ</title>
    <style>
        body {
            background-color: #333;
            background-image:
                linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.9)),
                url('æ·é”å›¾.jpg');
            background-blend-mode: multiply;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;

            color: #fff;
            font-family: "Microsoft YaHei", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            user-select: none;
            -webkit-touch-callout: none;
        }

        .container {
            width: 600px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 2px solid #ff4d4d;
            margin: 0 auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            background: #000;
            box-shadow: 0 0 20px rgba(255, 77, 77, 0.5);
        }

        .dialog-box {
            /* èƒŒæ™¯ç¨å¾®è°ƒé€æ˜ä¸€ç‚¹ï¼Œé€å‡ºåé¢çš„è†æ£˜èƒŒæ™¯ */
            border: 1px solid #444;
            background: rgba(17, 17, 17, 0.85);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            transition: box-shadow 0.3s, border-color 0.3s;
            position: relative;
            backdrop-filter: blur(5px);
            /* å¢åŠ ä¸€ç‚¹æ¯›ç»ç’ƒæ•ˆæœ */
        }

        .dialog-box.glowing {
            box-shadow: 0 0 60px rgba(255, 77, 77, 0.6);
            border-color: #ff4d4d;
        }

        #text-content {
            min-height: 60px;
            margin-bottom: 30px;
            line-height: 1.6;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        #shackle-circle-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            /* è¿™é‡Œçš„èƒŒæ™¯å·²ç»è¢«å»æ‰äº†ï¼Œæ˜¯é€æ˜çš„ */
        }

        #shackle-circle-container:active {
            transform: scale(0.98);
        }

        /* å›¾æ ‡å±‚é…ç½® */
        .shackle-icon-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 50%;

            /* è®¾ç½®èƒŒæ™¯å›¾ */
            background-size: 85%;
            background-repeat: no-repeat;
            background-position: center;

            opacity: 0.9;
            /* ã€ä¿®å¤ã€‘è¿™é‡ŒåŸæ¥å°‘äº†ä¸ª 's' */
            transition: all 0.3s ease-out;

            /* çº¢è‰²å‘å…‰æŠ•å½±ï¼Œè®©é»‘è‰²å›¾ç‰‡æµ®èµ·æ¥ */
            filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.8));
            z-index: 5;
        }


        /* æŒ‰ä½æ—¶ï¼Œå›¾æ ‡å‘çº¢å…‰ï¼Œå¹¶è½»å¾®æ”¾å¤§ */
        #shackle-circle-container.active .shackle-icon-layer {
            opacity: 1;
            transform: scale(1.02);
            filter: drop-shadow(0 0 10px rgba(255, 77, 77, 0.8));
        }

        /* 2. SVG è¿›åº¦ç¯ (ä¿æŒä¸å˜) */
        .progress-ring {
            position: absolute;
            top: 0;
            left: 0;
            width: 140px;
            height: 140px;
            transform: rotate(-90deg);
            pointer-events: none;
            z-index: 10;
        }

        .progress-ring__circle {
            stroke-dasharray: 408;
            stroke-dashoffset: 408;
            transition: stroke-dashoffset 0.2s ease-out;
        }

        /* æ¿€æ´»çŠ¶æ€ï¼š1.5ç§’å¡«æ»¡ */
        #shackle-circle-container.active .progress-ring__circle {
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 1.5s linear;
        }

        /* 3. ä¸­å¿ƒçš„æ–‡å­— (ä¿æŒä¸å˜) */
        .center-text {
            position: absolute;
            z-index: 20;
            font-size: 14px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 0 5px #000;
            pointer-events: none;
        }

        #shackle-circle-container.active .center-text {
            color: #fff;
            text-shadow: 0 0 15px #ff4d4d;
        }

        /* === åŠ¨ç”»ä¸ç»“å±€æ–‡æœ¬ === */
        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% {
                transform: translate(1px, 1px) rotate(0deg);
            }

            10% {
                transform: translate(-1px, -2px) rotate(-1deg);
            }

            20% {
                transform: translate(-3px, 0px) rotate(1deg);
            }

            30% {
                transform: translate(3px, 2px) rotate(0deg);
            }

            40% {
                transform: translate(1px, -1px) rotate(1deg);
            }

            50% {
                transform: translate(-1px, 2px) rotate(-1deg);
            }

            60% {
                transform: translate(-3px, 1px) rotate(0deg);
            }

            70% {
                transform: translate(3px, 1px) rotate(-1deg);
            }

            80% {
                transform: translate(-1px, -1px) rotate(1deg);
            }

            90% {
                transform: translate(1px, 2px) rotate(0deg);
            }

            100% {
                transform: translate(1px, -2px) rotate(-1deg);
            }
        }

        .final-text {
            text-align: left;
            line-height: 2;
            font-size: 18px;
            display: none;
            opacity: 0;
            animation: fadeIn 3s forwards;
            position: relative;
            z-index: 10;
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.8);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body>

    <div class="container" id="interaction-stage">
        <div class="avatar">ğŸ’</div>
        <div class="dialog-box">
            <div id="text-content">
                æˆ‘å°±çŒœåˆ°ä½ ä¼šåšä»€ä¹ˆï¼Œå±€é•¿<br>
                æˆ‘æå‰ç»™ä½ è®¾ç½®å¥½äº†é˜²æŠ¤å¢™ï¼Œä½ çš„æ·é”é‡Šæ”¾ä¸å‡ºæ¥çš„ï¼Œå¥½äº†åˆ«ç™½è´¹åŠŸå¤«å•¦ï¼Œæˆ‘ä»¬å›å®¶å§ï¼
            </div>

            <div id="shackle-circle-container">
                <div class="shackle-icon-layer" id="shackle-bg-layer" style="background-image: url('æŒ‰é’®å›¾.png');"></div>

                <svg class="progress-ring">
                    <circle stroke="rgba(255,255,255,0.05)" stroke-width="4" fill="transparent" r="70" cx="75"
                        cy="75" />
                    <circle class="progress-ring__circle" stroke="#ff4d4d" stroke-width="5" stroke-linecap="round"
                        fill="transparent" r="70" cx="75" cy="75" style="filter: drop-shadow(0 0 8px #ff4d4d);" />
                </svg>

                <div class="center-text" id="btn-text">é•¿æŒ‰é‡Šæ”¾</div>
            </div>

        </div>
    </div>

    <div class="container final-text" id="final-stage">
        <h1 style="color: #ff4d4d;">ç»“å±€ä¸€ï¼šå¥‡ç‚¹é™ä¸´</h1>
        <p>000 çš„è­¦å‘Šè¢«å·¨å¤§çš„è½°é¸£å£°æ·¹æ²¡ã€‚</p>
        <p>æ­¤æ—¶æ­¤åˆ»ï¼Œä¸€é¢—ä»æœªè¢«è®°å½•ã€æ²¡è¢«è§‚æµ‹åˆ°çš„ä¸æ˜å¤©ä½“è„±ç¦»äº†è½¨é“ï¼Œå¾„ç›´ç ¸åˆ°äº†è¿™ä¸ªåŸå¸‚ã€‚</p>
        <p>ä¸æ˜å¤©ä½“å¸¦æ¥äº†å…¨æ–°æœªçŸ¥çš„ç—…æ¯’ï¼Œå¹¶ä»¥æ­¤ä¸ºä¸­å¿ƒå‘å¤–æ‰©æ•£ã€‚</p>
        <br>
        <p style="color: #00a2ff;">åœ¨é‚£é™¨æ˜Ÿçš„ä¸­å¿ƒï¼Œå±€é•¿æ­£ä¸æŸç§ä¸å¯åçŠ¶çš„å­˜åœ¨å¯¹å³™ã€‚</p>
        <p>æ·é”çš„å…‰èŠ’ï¼Œæ­£åœ¨è¯•å›¾é˜»æ­¢ç—…æ¯’è”“å»¶ã€‚</p>
        <p>é‚£ä¸ªé™¨æ˜Ÿ... ä¼¼ä¹æœ‰ç”Ÿå‘½ã€‚</p>
    </div>

    <script>
        const texts = [
            "å¥½äº†å¥½äº†éƒ½è¯´äº†æ²¡æœ‰ç”¨çš„ã€‚<br>è¿™é‡Œçš„æ•°æ®é€»è¾‘å·²ç»è¢«æˆ‘å†™æ­»äº†ã€‚",
            "åœä¸‹ï¼ï¼åœä¸‹ï¼ï¼è¿™æ ·ä¼šæš´éœ²çš„ï¼ï¼<br>...å±€é•¿ä½ ç–¯äº†å—ï¼ä½ ä¸èƒ½è¢«ç•™åœ¨è¿™ï¼ï¼",
            "è­¦å‘Šï¼šé˜²æŠ¤å¢™ç ´ç¢...<br>åæ ‡å·²æš´éœ²...<br>å®Œäº†..."
        ];

        let step = 0;
        let pressTimer = null;
        let isCompleted = false;

        const container = document.getElementById('shackle-circle-container');
        const dialogBox = document.querySelector('.dialog-box');
        const textEl = document.getElementById('text-content');
        const btnText = document.getElementById('btn-text');
        // ç°åœ¨ HTML é‡Œæœ‰è¿™ä¸ª ID äº†ï¼Œè¿™é‡Œå°±èƒ½æ­£å¸¸è·å–äº†
        const bgLayer = document.getElementById('shackle-bg-layer');

        // === äº¤äº’é€»è¾‘å‡½æ•° ===

        function startPress(e) {
            e.preventDefault();
            if (isCompleted) return;

            container.classList.add('active'); // è§¦å‘ SVG åŠ¨ç”»
            dialogBox.classList.add('glowing'); // å‘å…‰

            // 1.5ç§’åæˆåŠŸ
            pressTimer = setTimeout(() => {
                triggerNextStage();
            }, 1500);
        }

        function endPress(e) {
            e.preventDefault();
            if (isCompleted) return;
            if (pressTimer) { clearTimeout(pressTimer); pressTimer = null; }

            container.classList.remove('active'); // åŠ¨ç”»å›é€€
            dialogBox.classList.remove('glowing');
        }

        function triggerNextStage() {
            container.classList.remove('active');
            dialogBox.classList.remove('glowing');

            // æŠ–åŠ¨ç‰¹æ•ˆ
            dialogBox.classList.remove('shake');
            void dialogBox.offsetWidth;
            dialogBox.classList.add('shake');

            if (step < texts.length) {
                textEl.innerHTML = texts[step];
                textEl.style.color = "#ff4d4d";
                textEl.style.fontWeight = "bold";

                // æ”¹å˜å›¾ç‰‡çš„å‘å…‰å¼ºåº¦
                if (step === 0) bgLayer.style.filter = "drop-shadow(0 0 15px #ff4d4d)";
                if (step === 1) bgLayer.style.filter = "drop-shadow(0 0 25px #ff4d4d)";

                if (step === 2) {
                    btnText.innerText = "é•¿æŒ‰ç²‰ç¢";
                } else {
                    btnText.innerText = "é•¿æŒ‰é‡Šæ”¾æ·é”";
                }

                step++;
            } else {
                isCompleted = true;
                enterFinalEnding();
            }
        }

        function enterFinalEnding() {
            document.getElementById('interaction-stage').style.display = 'none';
            document.getElementById('final-stage').style.display = 'block';
        }

        // === ç»‘å®šäº‹ä»¶ ===
        container.addEventListener('mousedown', startPress);
        container.addEventListener('touchstart', startPress);
        container.addEventListener('mouseup', endPress);
        container.addEventListener('mouseleave', endPress);
        container.addEventListener('touchend', endPress);
        container.addEventListener('touchcancel', endPress);
    </script>
</body>

</html>